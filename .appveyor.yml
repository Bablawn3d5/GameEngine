version: 0.2.0-{build}
branches:
  only:
  - master
pull_requests:
  do_not_increment_build_number: true
clone_depth: 50
cache: C:\deps\
build_script:
- ps: >-
    sed -i 's/git@github.com:/git:\/\/github.com\//' .gitmodules

    git submodule update --init --recursive

    cmake -DCMAKE_INSTALL_PREFIX=build -DENTITYX_BUILD_TESTING=0

    cmake --build . --target ALL_BUILD --config Release
    
test_script:
- ps: >-

    set PYTHONHOME=C:\Python27

    set PATH=$PYTHONHOME\Scripts;$PYTHONHOME;$PATH

    echo $PYTHONPATH

    echo $PATH

    ctest -VV -C Release
